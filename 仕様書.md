---

**作成日**: 2025年8月28日  
**バージョン**: 2.0  
**最終更新**: 追加機能検討・開発優先度設定  
**更新予定**: パッチ毎# League of Legends ダメージ計算ツール 仕様書

## 1. 概要

### 1.1 目的
League of Legendsにおけるチャンピオン同士の戦闘時のダメージを正確に計算し、ビルドやアイテムの効果を検証できるツールを開発する。

### 1.2 対象ユーザー
- LoLプレイヤー（初級〜上級）
- プロプレイヤー・コーチ
- ゲーム解析者

## 2. 機能要件

### 2.1 基本機能

#### 2.1.1 チャンピオン選択機能
- **入力**: チャンピオン名（攻撃側・防御側）
- **データベース**: 全チャンピオンの基礎ステータス
  - HP, MP, AD, AP, Armor, MR
  - レベル毎の成長値
  - スキルの基礎ダメージ・レシオ

#### 2.1.2 レベル設定機能
- **範囲**: レベル1-18
- **自動計算**: レベルに応じた基礎ステータスの算出

#### 2.1.3 アイテム選択機能
- **最大6アイテム**: メインアイテムスロット
- **アクセサリー**: ブーツ、ワード等
- **アイテム効果**: 
  - 基礎ステータス増加
  - パッシブ効果（AD増加、クリティカル等）
  - アクティブ効果

#### 2.1.4 ルーン設定機能
- **メインルーン**: キーストーン + 3つのルーン
- **サブルーン**: 2つのルーン
- **ステータスルーン**: アダプティブフォース、アーマー、マジックレジスト

### 2.2 ダメージ計算機能

#### 2.2.1 基本攻撃ダメージ
```
物理ダメージ = (基礎AD + ボーナスAD) × クリティカル倍率
最終ダメージ = 物理ダメージ × (100 / (100 + 対象アーマー))
```

#### 2.2.2 スキルダメージ
```
スキルダメージ = 基礎ダメージ + (AP × APレシオ) + (AD × ADレシオ) + (HP × HPレシオ) + その他レシオ
最終ダメージ = スキルダメージ × (100 / (100 + 対象マジックレジスト))
```

#### 2.2.3 混合ダメージ
- 物理・魔法・確定ダメージの複合計算

#### 2.2.4 特殊効果
- **アーマーペネトレーション**: 定数・割合
- **マジックペネトレーション**: 定数・割合
- **ライフスティール**: 物理ダメージからのHP回復
- **スペルバンプ**: 魔法ダメージからのHP回復

### 2.4 HP操作・シミュレーション機能

#### 2.4.1 対象HP設定機能
- **パーセント指定**: 1-100%の範囲で設定
- **実数値指定**: 具体的なHP数値で設定  
- **失ったHP指定**: 失ったHP量を指定して逆算
- **ドラッグ操作**: HPバーを直接ドラッグして調整
- **クイック設定**: ワンクリックで定型値(100%, 75%, 50%, 25%, 1HP)に設定

#### 2.4.2 HP変動シミュレーション
- **コンボ中HP変化**: スキル・攻撃毎のHP推移を計算
- **HP依存スキル再計算**: HP変化に応じた動的ダメージ調整
- **実行スキル判定**: Pyke R、Garen R等の実行閾値チェック
- **キル確定判定**: 各段階でのキル可能性表示

#### 2.4.3 特殊HP状況対応
- **シールド考慮**: パッシブ・アイテムシールドの影響
- **HP回復効果**: ライフスティール・スペルバンプ計算
- **復活効果**: GA、Zilean R等の考慮オプション

### 2.3 上級機能
- 複数スキル + 基本攻撃のコンボ
- 時系列でのダメージ推移
- クールダウン考慮

#### 2.3.2 DPS計算
- 秒間ダメージ出力
- 継続戦闘時のダメージ効率

#### 2.3.3 比較機能
- 異なるビルドでのダメージ比較
- アイテム効率の比較
- グラフ・チャート表示

## 3. データ要件

### 3.1 チャンピオンデータ
```json
{
  "name": "チャンピオン名",
  "baseStats": {
    "hp": {"base": 数値, "growth": 数値},
    "mp": {"base": 数値, "growth": 数値},
    "ad": {"base": 数値, "growth": 数値},
    "ap": {"base": 0, "growth": 0},
    "armor": {"base": 数値, "growth": 数値},
    "mr": {"base": 数値, "growth": 数値},
    "attackSpeed": {"base": 数値, "growth": 数値}
  },
  "skills": [
    {
      "name": "スキル名",
      "damage": {"base": [数値配列], "apRatio": 数値, "adRatio": 数値},
      "damageType": "physical|magical|true"
    }
  ]
}
```

### 3.2 アイテムデータ
```json
{
  "id": "アイテムID",
  "name": "アイテム名",
  "stats": {
    "ad": 数値,
    "ap": 数値,
    "hp": 数値,
    "armor": 数値,
    "mr": 数値
  },
  "passive": {
    "description": "パッシブ効果説明",
    "effects": ["効果配列"]
  }
}
```

### 3.3 ルーンデータ
```json
{
  "keystone": {
    "name": "キーストーン名",
    "effects": {
      "damageIncrease": 数値,
      "conditions": "発動条件"
    }
  }
}
```

## 4. UI/UX設計詳細

### 4.1 全体レイアウト構成

#### 4.1.1 メインレイアウト
```
┌─────────────────────────────────────────────────────────────────┐
│                        ヘッダー                                 │
│  LoL Damage Calculator    [設定保存] [読込] [リセット]           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │                 │  │                 │  │                 │  │
│  │   自分(攻撃側)   │  │  ダメージ結果   │  │  対象(防御側)    │  │
│  │                 │  │                 │  │                 │  │
│  │   - チャンピオン │  │ ┌─────────────┐ │  │   - チャンピオン │  │
│  │   - レベル      │  │ │基本攻撃     │ │  │   - レベル      │  │
│  │   - アイテム    │  │ │  xxx ダメージ│ │  │   - アイテム    │  │
│  │   - ルーン      │  │ └─────────────┘ │  │   - ルーン      │  │
│  │   - ステータス  │  │ ┌─────────────┐ │  │   - ステータス  │  │
│  │                 │  │ │Q スキル     │ │  │                 │  │
│  │                 │  │ │  xxx ダメージ│ │  │                 │  │
│  │                 │  │ └─────────────┘ │  │                 │  │
│  └─────────────────┘  │       ⋮         │  └─────────────────┘  │
│                       └─────────────────┘                       │
├─────────────────────────────────────────────────────────────────┤
│                     詳細ダメージ内訳                              │
│  [コンボ計算] [DPS計算] [比較モード] [グラフ表示]                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 4.1.2 レスポンシブ対応（タブレット・モバイル）
```
┌───────────────────────┐
│      ヘッダー          │
├───────────────────────┤
│   タブ切り替え        │
│ [自分] [対象] [結果]  │
├───────────────────────┤
│                       │
│    選択されたタブ     │
│      のコンテンツ      │
│                       │
└───────────────────────┘
```

### 4.2 左パネル - 自分（攻撃側）設計

#### 4.2.1 チャンピオン選択セクション
```
┌─────────────────────────────────────┐
│ 📋 チャンピオン選択                  │
├─────────────────────────────────────┤
│ ┌─────────────┐ ┌─────────────────┐ │
│ │             │ │ Ahri            │ │
│ │ チャンピオン │ │ レベル: [  18  ]│ │
│ │   画像      │ │                 │ │
│ │             │ │ 🔍 [検索ボックス]│ │
│ └─────────────┘ └─────────────────┘ │
└─────────────────────────────────────┘
```

#### 4.2.2 アイテムビルドセクション
```
┌─────────────────────────────────────┐
│ 🛡️ アイテムビルド                    │
├─────────────────────────────────────┤
│ ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐ │
│ │[+]│ │[+]│ │[+]│ │[+]│ │[+]│ │[+]│ │
│ └───┘ └───┘ └───┘ └───┘ └───┘ └───┘ │
│                                     │
│ ┌─────────────────┐ ブーツ:          │
│ │ 🔍 アイテム検索  │ ┌───┐           │
│ └─────────────────┘ │[+]│           │
│                     └───┘           │
└─────────────────────────────────────┘
```

#### 4.2.3 ルーン設定セクション
```
┌─────────────────────────────────────┐
│ ⚡ ルーン設定                        │
├─────────────────────────────────────┤
│ メインルーン: [Precision ▼]         │
│ ┌───────────────────────────────────┐ │
│ │ キーストーン: [Conqueror]         │ │
│ │ ┌───┐ ┌───┐ ┌───┐               │ │
│ │ │ ● │ │   │ │   │               │ │
│ │ └───┘ └───┘ └───┘               │ │
│ └───────────────────────────────────┘ │
│                                     │
│ サブルーン: [Domination ▼]          │
│ ┌───┐ ┌───┐                       │
│ │ ● │ │   │                       │
│ └───┘ └───┘                       │
│                                     │
│ ステータス: +9 AF, +6 AR, +8 MR     │
└─────────────────────────────────────┘
```

#### 4.2.5 バフ・デバフ設定セクション
```
┌─────────────────────────────────────┐
│ 🔥 バフ・デバフ設定                  │
├─────────────────────────────────────┤
│ ジャングル:                          │
│ ☑️ Red Buff    ☐ Blue Buff         │
│                                     │
│ ドラゴン:                           │
│ Infernal: [2] Mountain: [1]         │
│ Ocean: [0]    Cloud: [0]            │
│ ☑️ Elder Dragon                     │
│                                     │
│ その他:                              │
│ ☑️ Baron  ☐ ヘラルド              │
│                                     │
│ チャンピオン:                        │
│ [Lulu W ▼] レベル: [5]             │
│                                     │
│ 💡 適用効果プレビュー:                │
│ • AD: +48 (+40 Baron, +8 Infernal) │
│ • 攻撃速度: +35% (Lulu W)           │
│ • 燃焼: 45/秒 (Red + Elder)        │
└─────────────────────────────────────┘
```

#### 4.3.3 対象デバフ設定
```
┌─────────────────────────────────────┐
│ 💀 対象デバフ                        │
├─────────────────────────────────────┤
│ アーマー減少:                        │
│ ☑️ Black Cleaver [6スタック]        │
│ ☐ Corki E  ☐ Jarvan R              │
│                                     │
│ MR減少:                             │
│ ☑️ Abyssal Mask (味方範囲内)        │
│ ☐ Void Staff  ☐ Sorcerer's Shoes   │
│                                     │
│ ダメージ増幅:                        │
│ ☐ Press the Attack                  │
│ ☐ Conqueror [12スタック]            │
│                                     │
│ 💡 軽減効果:                         │
│ • アーマー: 95 → 57 (-40%)          │
│ • MR: 32 → 27 (-15%)               │
│ • 魔法ダメージ: +15% (Abyssal)       │
└─────────────────────────────────────┘
```
```
┌─────────────────────────────────────┐
│ 📊 最終ステータス                    │
├─────────────────────────────────────┤
│ ⚔️  攻撃力: 245 (基礎: 125)         │
│ 🔮  魔力: 180                       │
│ ❤️  体力: 2100 (基礎: 1800)         │
│ 🛡️  アーマー: 85                   │
│ ✨  MR: 45                         │
│                                     │
│ ⚡  攻撃速度: 1.45                   │
│ 💥  クリティカル: 60% (225%)        │
│ 🎯  物理貫通: 18 + 35%             │
│ 🌟  魔法貫通: 12 + 20%             │
└─────────────────────────────────────┘
```

### 4.3 右パネル - 対象（防御側）設計

#### 4.3.1 対象設定セクション
```
┌─────────────────────────────────────┐
│ 🎯 攻撃対象設定                      │
├─────────────────────────────────────┤
│ ┌─────────────┐ ┌─────────────────┐ │
│ │             │ │ Yasuo           │ │
│ │ チャンピオン │ │ レベル: [  16  ]│ │
│ │   画像      │ │                 │ │
│ │             │ │ 🎯 HP設定 ▼     │ │
│ └─────────────┘ └─────────────────┘ │
│                                     │
│ ☑️ 標準ビルド使用                   │
│ ☐ カスタムビルド                   │
└─────────────────────────────────────┘
```

#### 4.3.1a HP操作パネル（展開時）
```
┌─────────────────────────────────────┐
│ ❤️ 対象HP設定                        │
├─────────────────────────────────────┤
│ 現在HP設定方法:                      │
│ ○ パーセント指定                     │
│ ○ 実数値指定                        │
│ ○ 失ったHP指定                       │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 現在HP: [ 80 ]% (1680/2100)     │ │
│ │ ████████████████░░░░░░░░░       │ │
│ │ ────────────────────────────── │ │ │
│ │      👆 ドラッグで調整           │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 🎮 クイック設定:                     │
│ [100%] [75%] [50%] [25%] [1HP]      │
│                                     │
│ 💡 HP依存スキル影響:                 │
│ • 現在HP依存: Vayne W, Blade等      │
│ • 失HP依存: Darius R, Pyke R等      │
│ • 最大HP依存: Amumu W, Brand P等    │
└─────────────────────────────────────┘
```

#### 4.3.2 対象のステータス表示
```
┌─────────────────────────────────────┐
│ 🛡️ 対象ステータス                    │
├─────────────────────────────────────┤
│ ❤️  HP: 1680 / 2100                │
│ ┌─────────────────────────────────┐   │
│ │████████████████░░░░░░░░░       │   │
│ └─────────────────────────────────┘   │
│                                     │
│ 🛡️  アーマー: 95                   │
│ ✨  MR: 32                         │
│                                     │
│ 📈  実効HP（物理）: 3276            │
│ 🔮  実効HP（魔法）: 2217            │
│                                     │
│ 🎲  特殊効果:                       │
│ • Wind Wall (Wスキル)               │
│ • パッシブシールド: 510             │
└─────────────────────────────────────┘
```

### 4.4 中央パネル - ダメージ結果表示

#### 4.4.1 基本ダメージ表示
```
┌─────────────────────────────────────┐
│ ⚔️ ダメージ計算結果                  │
├─────────────────────────────────────┤
│ 基本攻撃                            │
│ ┌─────────────────────────────────┐ │
│ │ 245 → 156 ダメージ              │ │
│ │ ┌─────────────────────────────┐ │ │
│ │ │████████████████░░░░░░░░░░ │ │ │
│ │ └─────────────────────────────┘ │ │
│ │ 軽減: 36% (アーマー: 95)        │ │
│ └─────────────────────────────────┘ │
│                                     │
│ クリティカル時                       │
│ ┌─────────────────────────────────┐ │
│ │ 551 → 351 ダメージ              │ │
│ │ ┌─────────────────────────────┐ │ │
│ │ │████████████████████████░░ │ │ │
│ │ └─────────────────────────────┘ │ │
│ │ キル可能: ❌ (残HP: 1329)       │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

#### 4.4.3 バフ効果込みダメージ表示
```
┌─────────────────────────────────────┐
│ ⚔️ バフ適用後ダメージ                │
├─────────────────────────────────────┤
│ 基本攻撃 (バフ適用後)                │
│ ┌─────────────────────────────────┐ │
│ │ 293 → 187 ダメージ              │ │
│ │ ┌─────────────────────────────┐ │ │
│ │ │████████████████████░░░░░░ │ │ │
│ │ └─────────────────────────────┘ │ │
│ │ + Red Buff: 25 (燃焼 3秒)       │ │
│ │ + Elder: 84 (燃焼 3秒)          │ │
│ │ 総ダメージ: 187 + 327 DoT       │ │
│ └─────────────────────────────────┘ │
│                                     │
│ Q スキル + バフ                      │
│ ┌─────────────────────────────────┐ │
│ │ 348 → 289 ダメージ              │ │
│ │ ┌─────────────────────────────┐ │ │
│ │ │████████████████████████░░ │ │ │
│ │ │ 基礎: 240 + AP: 108         │ │ │
│ │ │ Abyssal増幅: +15%           │ │ │
│ │ └─────────────────────────────┘ │ │
│ │ キル可能: ✅ (Elder実行適用)     │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 🔥 Elder Dragon 実行判定:           │
│ 対象HP < 336 (20%) → 即死            │
└─────────────────────────────────────┘
```
```
┌─────────────────────────────────────┐
│ ✨ スキルダメージ                     │
├─────────────────────────────────────┤
│ Q - オーブ・オブ・ディセプション      │
│ ┌─────────────────────────────────┐ │
│ │ レベル: [5▼] クールダウン: 7s   │ │
│ │ 320 → 243 ダメージ              │ │
│ │ ┌─────────────────────────────┐ │ │
│ │ │████████████████████░░░░░░ │ │ │
│ │ │ 基礎: 240 + AP: 80 (0.8)   │ │ │
│ │ └─────────────────────────────┘ │ │
│ │ 復路ヒット: 480 → 364 ダメージ   │ │
│ └─────────────────────────────────┘ │
│                                     │
│ W - 狐火                           │
│ E - 魅惑                           │
│ R - 精霊疾走                        │
└─────────────────────────────────────┘
```

### 4.5 インタラクション設計

#### 4.5.1 リアルタイム更新システム
- **即座反映**: アイテム変更時に0.1秒以内でダメージ再計算
- **ハイライト**: 変更された値を一時的に強調表示
- **アニメーション**: ダメージバーの変化をスムーズに表示

#### 4.5.2 ホバー効果・ツールチップ
```javascript
// ツールチップの例
<div className="damage-tooltip">
  <div className="tooltip-header">基本攻撃ダメージ詳細</div>
  <div className="tooltip-content">
    基礎AD: 125
    + ボーナスAD: 120
    = 総AD: 245
    
    軽減前: 245
    アーマー軽減: 36% (95 armor)
    最終ダメージ: 156
  </div>
</div>
```

#### 4.5.3 コンボモード UI
```
┌─────────────────────────────────────┐
│ 🔥 コンボ計算                        │
├─────────────────────────────────────┤
│ ┌─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┐ │
│ │Q│→│AA│→│E│→│W│→│R│→│AA│→│ │→│ │ │
│ └─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┘ │
│                                     │
│ 総ダメージ: 1847                     │
│ 実行時間: 3.2秒                      │
│ キル可能: ✅                         │
│                                     │
│ ┌─ タイムライン ─────────────────┐   │
│ │ 0.0s: Q (243 dmg) HP: 1437    │   │
│ │ 0.5s: AA (156 dmg) HP: 1281   │   │
│ │ 1.0s: E (189 dmg) HP: 1092    │   │
│ │ 1.5s: W (312 dmg) HP: 780     │   │
│ │ 2.0s: R (456 dmg) HP: 324     │   │
│ │ 2.5s: AA (156 dmg) HP: 168    │   │
│ └───────────────────────────────┘   │
└─────────────────────────────────────┘
```

### 4.6 モバイル・タブレット対応

#### 4.6.1 タブレット レイアウト
```
┌─────────────────────────────────────┐
│           ヘッダー                   │
├─────────────────────────────────────┤
│ ┌─────────────┐ ┌─────────────────┐ │
│ │    自分     │ │     対象        │ │
│ │           │ │               │ │
│ │ (縦配置)    │ │ (縦配置)        │ │
│ │             │ │                 │ │
│ └─────────────┘ └─────────────────┘ │
├─────────────────────────────────────┤
│         ダメージ結果 (横幅最大)       │
└─────────────────────────────────────┘
```

#### 4.6.2 モバイル レイアウト
```
┌─────────────────┐
│    ヘッダー      │
├─────────────────┤
│  [自分][対象]    │
│    [結果]       │ ← タブ切り替え
├─────────────────┤
│                 │
│  選択タブの      │
│   コンテンツ     │
│                 │
│                 │
└─────────────────┘
```

### 4.7 アクセシビリティ対応

#### 4.7.1 キーボードナビゲーション
- Tab順序: 左→中央→右の順序で移動
- ショートカット: Ctrl+1〜6 でアイテムスロット選択
- Enterキー: 選択中の要素を実行

#### 4.7.2 色覚サポート
- ダメージタイプ: 色+アイコンの組み合わせ
- 物理ダメージ: 🗡️ + 橙色
- 魔法ダメージ: ✨ + 青色  
- 確定ダメージ: ⚡ + 白色

#### 4.7.3 フォントサイズ・コントラスト対応
- 最小フォント: 14px
- コントラスト比: 4.5:1 以上
- ダークモード対応

## 5. 技術要件

### 5.1 フロントエンド
- **フレームワーク**: React.js または Vue.js
- **状態管理**: Redux または Vuex
- **UI コンポーネント**: Material-UI または Element UI
- **チャート**: Chart.js または D3.js

### 5.2 データ管理
- **データソース**: Riot Games API（可能な範囲）
- **ローカルデータ**: JSON形式でのデータ管理
- **更新頻度**: パッチ毎の手動更新

### 5.3 パフォーマンス要件
- **計算速度**: 設定変更から100ms以内での再計算
- **初期読み込み**: 3秒以内
- **メモリ使用量**: 50MB以下

## 6. 計算ロジック詳細

### 6.1 ダメージ減少計算
```javascript
// アーマーによる物理ダメージ減少
function calculatePhysicalDamageReduction(damage, armor, armorPen) {
    const effectiveArmor = Math.max(0, armor - armorPen.flat) * (1 - armorPen.percent);
    return damage * (100 / (100 + effectiveArmor));
}

// マジックレジストによる魔法ダメージ減少
function calculateMagicalDamageReduction(damage, mr, mrPen) {
    const effectiveMR = Math.max(0, mr - mrPen.flat) * (1 - mrPen.percent);
    return damage * (100 / (100 + effectiveMR));
}
```

### 6.2 クリティカル計算
```javascript
function calculateCriticalDamage(baseDamage, critChance, critDamage) {
    const avgDamage = baseDamage * (1 + (critChance * (critDamage - 1)));
    return avgDamage;
}
```

### 6.4 バフ・デバフシステム詳細

#### 6.4.1 バフ・デバフ管理クラス
```javascript
/**
 * バフ・デバフ効果の統合管理システム
 */
class BuffDebuffManager {
    constructor() {
        this.activeBuffs = new Map();
        this.activeDebuffs = new Map();
        this.buffDefinitions = this.initializeBuffDefinitions();
    }
    
    /**
     * バフ定義の初期化
     */
    initializeBuffDefinitions() {
        return {
            // === ジャングルバフ ===
            redBuff: {
                name: "Red Brambleback",
                type: "jungle",
                duration: 90,
                effects: {
                    onHitDamage: (stats) => 5 + (stats.bonusAD * 0.05),
                    slowEffect: 0.15,
                    burnDuration: 3
                },
                damageType: "true"
            },
            
            blueBuff: {
                name: "Blue Sentinel", 
                type: "jungle",
                duration: 90,
                effects: {
                    manaRegen: 0.05, // 最大マナの5%/秒
                    cdr: 0.10, // 10% CDR
                    apBonus: 15
                }
            },
            
            // === ドラゴンバフ ===
            infernalDrake: {
                name: "Infernal Drake",
                type: "dragon",
                duration: Infinity,
                stackable: true,
                maxStacks: 4,
                effects: {
                    adBonus: (stacks) => stacks * 0.06, // 6% per stack
                    apBonus: (stacks) => stacks * 0.06
                }
            },
            
            mountainDrake: {
                name: "Mountain Drake",
                type: "dragon", 
                duration: Infinity,
                stackable: true,
                maxStacks: 4,
                effects: {
                    armorBonus: (stacks) => stacks * 0.06,
                    mrBonus: (stacks) => stacks * 0.06
                }
            },
            
            oceanDrake: {
                name: "Ocean Drake",
                type: "dragon",
                duration: Infinity,
                stackable: true,
                maxStacks: 4,
                effects: {
                    hpRegen: (stacks, missingHP) => (stacks * 0.025) * missingHP,
                    manaRegen: (stacks, missingMP) => (stacks * 0.015) * missingMP
                }
            },
            
            cloudDrake: {
                name: "Cloud Drake",
                type: "dragon",
                duration: Infinity,
                stackable: true,
                maxStacks: 4,
                effects: {
                    movementSpeed: (stacks) => stacks * 0.035,
                    ultCDR: (stacks) => stacks * 0.06 // Ultimate CDR
                }
            },
            
            elderDragon: {
                name: "Elder Dragon",
                type: "dragon",
                duration: 150,
                effects: {
                    burnDamage: (targetMaxHP) => Math.max(90, targetMaxHP * 0.05),
                    burnDuration: 3,
                    executeThreshold: 0.2 // 20% HP以下で即死
                },
                damageType: "true"
            },
            
            // === バロンバフ ===
            baron: {
                name: "Baron Nashor",
                type: "baron",
                duration: 180,
                effects: {
                    adBonus: 40,
                    apBonus: 40,
                    minionBonus: true,
                    recallSpeed: 4 // 4秒でリコール
                }
            },
            
            // === チャンピオンバフ ===
            luluW: {
                name: "Whimsy",
                type: "champion",
                champion: "Lulu",
                duration: 5,
                effects: {
                    attackSpeedBonus: 0.35,
                    movementSpeedBonus: 0.30
                }
            },
            
            karmaE: {
                name: "Inspire", 
                type: "champion",
                champion: "Karma",
                duration: 2.5,
                effects: {
                    shield: (karmaAP) => 80 + (karmaAP * 0.5),
                    movementSpeedBonus: 0.40
                }
            },
            
            sivir_r: {
                name: "On The Hunt",
                type: "champion", 
                champion: "Sivir",
                duration: 8,
                effects: {
                    movementSpeedBonus: (level) => [0.20, 0.30, 0.40][level],
                    attackSpeedBonus: (level) => [0.30, 0.45, 0.60][level],
                    teamWide: true
                }
            },
            
            // === アイテムバフ ===
            locketActive: {
                name: "Locket of Iron Solari",
                type: "item",
                duration: 2.5,
                effects: {
                    shield: (userLevel, userHP) => 230 + (userLevel * 15) + (userHP * 0.02)
                }
            },
            
            // === デバフ効果 ===
            blackCleaver: {
                name: "Black Cleaver",
                type: "debuff",
                duration: 6,
                stackable: true,
                maxStacks: 6,
                effects: {
                    armorReduction: (stacks) => stacks * 0.05 // 5% per stack
                }
            },
            
            voidStaff: {
                name: "Void Staff",
                type: "item",
                duration: Infinity,
                effects: {
                    magicPenPercent: 0.40 // 40% magic pen
                }
            },
            
            abyssal_mask: {
                name: "Abyssal Mask",
                type: "debuff",
                duration: Infinity,
                aura: true,
                range: 325,
                effects: {
                    magicDamageAmplify: 0.15 // 15% increased magic damage
                }
            }
        };
    }
    
    /**
     * バフ効果の適用
     */
    applyBuff(buffId, stacks = 1, duration = null) {
        const buffDef = this.buffDefinitions[buffId];
        if (!buffDef) return;
        
        const buffInstance = {
            id: buffId,
            definition: buffDef,
            stacks: Math.min(stacks, buffDef.maxStacks || 1),
            remainingDuration: duration || buffDef.duration,
            appliedTime: Date.now()
        };
        
        this.activeBuffs.set(buffId, buffInstance);
    }
    
    /**
     * デバフ効果の適用
     */
    applyDebuff(debuffId, stacks = 1, duration = null) {
        const debuffDef = this.buffDefinitions[debuffId];
        if (!debuffDef) return;
        
        const debuffInstance = {
            id: debuffId,
            definition: debuffDef,
            stacks: Math.min(stacks, debuffDef.maxStacks || 1),
            remainingDuration: duration || debuffDef.duration,
            appliedTime: Date.now()
        };
        
        this.activeDebuffs.set(debuffId, debuffInstance);
    }
    
    /**
     * 統合ステータス計算
     */
    calculateModifiedStats(baseStats) {
        let modifiedStats = { ...baseStats };
        
        // バフ効果適用
        this.activeBuffs.forEach(buff => {
            modifiedStats = this.applyBuffEffects(modifiedStats, buff);
        });
        
        // デバフ効果適用
        this.activeDebuffs.forEach(debuff => {
            modifiedStats = this.applyDebuffEffects(modifiedStats, debuff);
        });
        
        return modifiedStats;
    }
    
    /**
     * バフ効果の適用
     */
    applyBuffEffects(stats, buff) {
        const effects = buff.definition.effects;
        const stacks = buff.stacks;
        
        // AD/APボーナス
        if (effects.adBonus) {
            const bonus = typeof effects.adBonus === 'function' 
                ? effects.adBonus(stacks) 
                : effects.adBonus;
            stats.totalAD += stats.baseAD * bonus;
        }
        
        if (effects.apBonus) {
            const bonus = typeof effects.apBonus === 'function'
                ? effects.apBonus(stacks)
                : effects.apBonus;
            stats.totalAP += bonus;
        }
        
        // アーマー/MRボーナス
        if (effects.armorBonus) {
            const bonus = typeof effects.armorBonus === 'function'
                ? effects.armorBonus(stacks)
                : effects.armorBonus;
            stats.totalArmor += stats.baseArmor * bonus;
        }
        
        if (effects.mrBonus) {
            const bonus = typeof effects.mrBonus === 'function'
                ? effects.mrBonus(stacks) 
                : effects.mrBonus;
            stats.totalMR += stats.baseMR * bonus;
        }
        
        // 攻撃速度
        if (effects.attackSpeedBonus) {
            const bonus = typeof effects.attackSpeedBonus === 'function'
                ? effects.attackSpeedBonus(stacks)
                : effects.attackSpeedBonus;
            stats.attackSpeed *= (1 + bonus);
        }
        
        return stats;
    }
    
    /**
     * デバフ効果の適用
     */
    applyDebuffEffects(stats, debuff) {
        const effects = debuff.definition.effects;
        const stacks = debuff.stacks;
        
        // アーマー減少
        if (effects.armorReduction) {
            const reduction = typeof effects.armorReduction === 'function'
                ? effects.armorReduction(stacks)
                : effects.armorReduction;
            stats.totalArmor *= (1 - reduction);
        }
        
        // MR減少  
        if (effects.mrReduction) {
            const reduction = typeof effects.mrReduction === 'function'
                ? effects.mrReduction(stacks)
                : effects.mrReduction;
            stats.totalMR *= (1 - reduction);
        }
        
        return stats;
    }
    
    /**
     * ダメージ修正の計算
     */
    calculateDamageModifiers(damage, damageType, attackerBuffs, targetDebuffs) {
        let modifiedDamage = damage;
        
        // 攻撃側バフによるダメージ増加
        attackerBuffs.forEach(buff => {
            if (buff.definition.effects.damageAmplify) {
                modifiedDamage *= (1 + buff.definition.effects.damageAmplify);
            }
        });
        
        // 対象のデバフによるダメージ増加
        targetDebuffs.forEach(debuff => {
            if (debuff.definition.effects.magicDamageAmplify && damageType === 'magical') {
                modifiedDamage *= (1 + debuff.definition.effects.magicDamageAmplify);
            }
        });
        
        return modifiedDamage;
    }
    
    /**
     * 追加ダメージ効果の計算
     */
    calculateOnHitEffects(attackerStats, targetStats, attackerBuffs) {
        let totalOnHitDamage = 0;
        
        attackerBuffs.forEach(buff => {
            const effects = buff.definition.effects;
            
            // Red Buff の燃焼ダメージ
            if (effects.onHitDamage) {
                const damage = typeof effects.onHitDamage === 'function'
                    ? effects.onHitDamage(attackerStats)
                    : effects.onHitDamage;
                totalOnHitDamage += damage;
            }
            
            // Elder Dragon の燃焼
            if (effects.burnDamage) {
                const damage = typeof effects.burnDamage === 'function'
                    ? effects.burnDamage(targetStats.totalHP)
                    : effects.burnDamage;
                totalOnHitDamage += damage;
            }
        });
        
        return totalOnHitDamage;
    }
}
```

#### 6.4.2 バフ・デバフUI統合
```javascript
/**
 * バフ・デバフ選択UI
 */
class BuffDebuffUI {
    renderBuffSelection() {
        return `
        <div class="buff-debuff-panel">
            <h3>🔥 バフ・デバフ設定</h3>
            
            <!-- ジャングルバフ -->
            <div class="buff-category">
                <h4>ジャングルバフ</h4>
                <label><input type="checkbox" id="redBuff"> Red Buff</label>
                <label><input type="checkbox" id="blueBuff"> Blue Buff</label>
            </div>
            
            <!-- ドラゴンバフ -->
            <div class="buff-category">
                <h4>ドラゴンバフ</h4>
                <div class="drake-selection">
                    <label>Infernal: <input type="number" min="0" max="4" value="0"></label>
                    <label>Mountain: <input type="number" min="0" max="4" value="0"></label>
                    <label>Ocean: <input type="number" min="0" max="4" value="0"></label>
                    <label>Cloud: <input type="number" min="0" max="4" value="0"></label>
                </div>
                <label><input type="checkbox" id="elderDragon"> Elder Dragon</label>
            </div>
            
            <!-- バロンバフ -->
            <div class="buff-category">
                <h4>その他</h4>
                <label><input type="checkbox" id="baron"> Baron</label>
            </div>
            
            <!-- チャンピオンバフ -->
            <div class="buff-category">
                <h4>チャンピオンバフ</h4>
                <select id="championBuff">
                    <option value="">選択...</option>
                    <option value="luluW">Lulu W (Whimsy)</option>
                    <option value="karmaE">Karma E (Inspire)</option>
                    <option value="sivir_r">Sivir R (On The Hunt)</option>
                </select>
            </div>
        </div>
        `;
    }
}
```

### 6.3 スキル計算ロジック詳細
```javascript
class SkillDamageCalculator {
    /**
     * スキルダメージを計算
     * @param {Object} skill - スキル情報
     * @param {Object} championStats - チャンピオンステータス
     * @param {number} skillLevel - スキルレベル (0-4, ultimateは0-2)
     * @param {Object} targetStats - 対象のステータス
     */
    calculateSkillDamage(skill, championStats, skillLevel, targetStats) {
        // 基礎ダメージ取得
        const baseDamage = this.getBaseDamage(skill, skillLevel);
        
        // レシオダメージ計算
        const ratioDamage = this.calculateRatioDamage(skill, championStats);
        
        // 総ダメージ（軽減前）
        const rawDamage = baseDamage + ratioDamage;
        
        // ダメージタイプに応じた軽減計算
        const finalDamage = this.applyDamageReduction(
            rawDamage, 
            skill.damageType, 
            championStats, 
            targetStats
        );
        
        return {
            baseDamage,
            ratioDamage,
            rawDamage,
            finalDamage,
            damageBreakdown: this.getDamageBreakdown(skill, championStats)
        };
    }
    
    /**
     * 基礎ダメージ取得
     */
    getBaseDamage(skill, skillLevel) {
        if (Array.isArray(skill.damage.base)) {
            return skill.damage.base[skillLevel] || 0;
        }
        return skill.damage.base || 0;
    }
    
    /**
     * レシオダメージ計算
     */
    calculateRatioDamage(skill, stats) {
        let ratioDamage = 0;
        
        // ADレシオ
        if (skill.damage.adRatio) {
            ratioDamage += stats.totalAD * skill.damage.adRatio;
        }
        
        // APレシオ
        if (skill.damage.apRatio) {
            ratioDamage += stats.totalAP * skill.damage.apRatio;
        }
        
        // HPレシオ
        if (skill.damage.hpRatio) {
            ratioDamage += stats.totalHP * skill.damage.hpRatio;
        }
        
        // ボーナスADレシオ
        if (skill.damage.bonusAdRatio) {
            ratioDamage += (stats.totalAD - stats.baseAD) * skill.damage.bonusAdRatio;
        }
        
        // ボーナスHPレシオ
        if (skill.damage.bonusHpRatio) {
            ratioDamage += (stats.totalHP - stats.baseHP) * skill.damage.bonusHpRatio;
        }
        
        // アーマーレシオ
        if (skill.damage.armorRatio) {
            ratioDamage += stats.totalArmor * skill.damage.armorRatio;
        }
        
        // MRレシオ
        if (skill.damage.mrRatio) {
            ratioDamage += stats.totalMR * skill.damage.mrRatio;
        }
        
        return ratioDamage;
    }
    
    /**
     * ダメージタイプ別軽減適用
     */
    applyDamageReduction(damage, damageType, attackerStats, targetStats) {
        switch (damageType) {
            case 'physical':
                return calculatePhysicalDamageReduction(
                    damage, 
                    targetStats.totalArmor, 
                    attackerStats.armorPenetration
                );
            
            case 'magical':
                return calculateMagicalDamageReduction(
                    damage, 
                    targetStats.totalMR, 
                    attackerStats.magicPenetration
                );
            
            case 'true':
                return damage; // 確定ダメージは軽減されない
            
            case 'mixed':
                // 混合ダメージの場合、物理・魔法を分けて計算
                const physicalPortion = damage * (skill.damage.physicalRatio || 0.5);
                const magicalPortion = damage * (skill.damage.magicalRatio || 0.5);
                
                const physicalFinal = calculatePhysicalDamageReduction(
                    physicalPortion, targetStats.totalArmor, attackerStats.armorPenetration
                );
                const magicalFinal = calculateMagicalDamageReduction(
                    magicalPortion, targetStats.totalMR, attackerStats.magicPenetration
                );
                
                return physicalFinal + magicalFinal;
            
            default:
                return damage;
        }
    }
}
```

#### 6.3.2 特殊効果付きスキル計算
```javascript
/**
 * 特殊効果を持つスキルの処理
 */
class SpecialSkillEffects {
    /**
     * 対象の現在HPに依存するダメージ
     * 例: Vayne W, Fiora passive
     */
    calculateCurrentHpDamage(basePercent, targetCurrentHp, minDamage = 0, maxDamage = Infinity) {
        const damage = targetCurrentHp * (basePercent / 100);
        return Math.max(minDamage, Math.min(maxDamage, damage));
    }
    
    /**
     * 対象の最大HPに依存するダメージ
     * 例: Amumu W, Brand passive
     */
    calculateMaxHpDamage(basePercent, targetMaxHp, minDamage = 0, maxDamage = Infinity) {
        const damage = targetMaxHp * (basePercent / 100);
        return Math.max(minDamage, Math.min(maxDamage, damage));
    }
    
    /**
     * 失ったHPに依存するダメージ
     * 例: Darius ultimate
     */
    calculateMissingHpDamage(basePercent, targetMaxHp, targetCurrentHp) {
        const missingHp = targetMaxHp - targetCurrentHp;
        return missingHp * (basePercent / 100);
    }
    
    /**
     * 距離に依存するダメージ
     * 例: Graves Q
     */
    calculateDistanceBasedDamage(baseDamage, distance, minMultiplier, maxMultiplier, optimalRange) {
        const distanceRatio = Math.min(distance / optimalRange, 1);
        const multiplier = minMultiplier + (maxMultiplier - minMultiplier) * distanceRatio;
        return baseDamage * multiplier;
    }
    
    /**
     * スタック依存ダメージ
     * 例: Darius passive, Irelia passive
     */
    calculateStackBasedDamage(baseDamage, stacks, damagePerStack, maxStacks) {
        const effectiveStacks = Math.min(stacks, maxStacks);
        return baseDamage + (damagePerStack * effectiveStacks);
    }
}
```

#### 6.3.3 DOT（継続ダメージ）計算
```javascript
/**
 * 継続ダメージ計算
 */
class DOTCalculator {
    /**
     * DOTダメージの総量計算
     * @param {number} damagePerTick - 1tickあたりのダメージ
     * @param {number} duration - 継続時間（秒）
     * @param {number} tickInterval - tick間隔（秒）
     */
    calculateTotalDOTDamage(damagePerTick, duration, tickInterval = 1) {
        const numberOfTicks = Math.floor(duration / tickInterval);
        return damagePerTick * numberOfTicks;
    }
    
    /**
     * 時間経過によるDOTダメージ配列
     */
    getDOTTimeline(damagePerTick, duration, tickInterval = 1) {
        const timeline = [];
        let totalDamage = 0;
        
        for (let time = tickInterval; time <= duration; time += tickInterval) {
            totalDamage += damagePerTick;
            timeline.push({
                time: time,
                tickDamage: damagePerTick,
                totalDamage: totalDamage
            });
        }
        
        return timeline;
    }
}
```

#### 6.3.4 コンボ計算システム
```javascript
/**
 * スキルコンボ計算
 */
class ComboCalculator {
    /**
     * コンボダメージ計算
     * @param {Array} combo - スキル順序配列
     * @param {Object} championStats - チャンピオンステータス
     * @param {Object} targetStats - 対象ステータス
     */
    calculateComboDamage(combo, championStats, targetStats) {
        let totalDamage = 0;
        let timeline = [];
        let currentTime = 0;
        let targetCurrentHp = targetStats.totalHP;
        
        combo.forEach((action, index) => {
            let actionDamage = 0;
            
            // アクションタイプによる処理分岐
            switch (action.type) {
                case 'skill':
                    actionDamage = this.calculateSkillDamageInCombo(
                        action, championStats, targetStats, targetCurrentHp
                    );
                    break;
                
                case 'autoAttack':
                    actionDamage = this.calculateAutoAttackDamage(
                        championStats, targetStats
                    );
                    break;
                
                case 'item':
                    actionDamage = this.calculateItemActiveDamage(
                        action, championStats, targetStats
                    );
                    break;
            }
            
            // タイムラインに追加
            currentTime += action.castTime || 0;
            timeline.push({
                time: currentTime,
                action: action.name,
                damage: actionDamage,
                targetHpAfter: Math.max(0, targetCurrentHp - actionDamage)
            });
            
            // 対象HPを更新
            targetCurrentHp = Math.max(0, targetCurrentHp - actionDamage);
            totalDamage += actionDamage;
        });
        
        return {
            totalDamage,
            timeline,
            canKill: targetCurrentHp <= 0,
            overkill: Math.max(0, totalDamage - targetStats.totalHP)
        };
    }
    
    /**
     * コンボ内でのスキルダメージ計算（HP依存効果考慮）
     */
    calculateSkillDamageInCombo(skillAction, attackerStats, targetStats, targetCurrentHp) {
        const skill = skillAction.skill;
        const skillLevel = skillAction.level;
        
        // 基本ダメージ計算
        let damage = this.getBaseDamage(skill, skillLevel);
        damage += this.calculateRatioDamage(skill, attackerStats);
        
        // HP依存効果の適用
        if (skill.effects?.currentHpPercent) {
            damage += targetCurrentHp * (skill.effects.currentHpPercent / 100);
        }
        
        if (skill.effects?.missingHpPercent) {
            const missingHp = targetStats.totalHP - targetCurrentHp;
            damage += missingHp * (skill.effects.missingHpPercent / 100);
        }
        
        // ダメージ軽減適用
        return this.applyDamageReduction(damage, skill.damageType, attackerStats, targetStats);
    }
}
```

#### 6.3.5 チャンピオン別特殊計算例
```javascript
/**
 * チャンピオン固有の計算ロジック例
 */
class ChampionSpecificCalculations {
    /**
     * Zed R（影の刃）のダメージ計算
     */
    calculateZedUltimate(skillLevel, attackerStats, damageDealt, targetStats) {
        const baseMultiplier = [0.25, 0.40, 0.55][skillLevel];
        const bonusDamage = damageDealt * baseMultiplier;
        
        // 最低ダメージ保証
        const minDamage = [100, 200, 300][skillLevel] + (attackerStats.bonusAD * 0.5);
        
        const finalDamage = Math.max(bonusDamage, minDamage);
        
        return calculatePhysicalDamageReduction(
            finalDamage,
            targetStats.totalArmor,
            attackerStats.armorPenetration
        );
    }
    
    /**
     * Pyke R（深海の処刑）の実行判定
     */
    calculatePykeExecute(skillLevel, targetCurrentHp, attackerStats) {
        const executeThreshold = [250, 290, 330][skillLevel] + (attackerStats.lethality * 1.5);
        
        return {
            canExecute: targetCurrentHp <= executeThreshold,
            threshold: executeThreshold,
            damage: targetCurrentHp <= executeThreshold ? 99999 : 0
        };
    }
    
    /**
     * Vel'Koz passive（解体光線）のダメージ
     */
    calculateVelkozPassive(championLevel, attackerStats, targetStats) {
        const baseDamage = 33 + (championLevel - 1) * 17;
        const bonusDamage = attackerStats.totalAP * 0.5;
        const totalDamage = baseDamage + bonusDamage;
        
        // 確定ダメージ
        return totalDamage;
    }
}
```

## 7. 今後の拡張予定

### 7.1 フェーズ2機能
- チーム戦シミュレーション
- ゲーム時間による成長シミュレーション
- プロビルドデータ連携

### 7.2 フェーズ3機能
- AIによるビルド提案
- 対面マッチアップ分析
- 統計データとの連携

## 8. 追加検討機能

### 8.1 バフ・デバフシステム
- **味方バフ**: サポートスキル（Lulu W、Karma E等）の効果適用
- **敵デバフ**: アーマー/MR減少効果（Corki E、Abyssal Mask等）
- **アイテムバフ**: Baron、Dragon、赤/青バフの効果
- **時限バフ**: 効果時間の管理とタイムライン表示

### 8.2 チーム戦シミュレーション
- **5vs5設定**: 複数チャンピオンの同時計算
- **フォーカスターゲット**: 集中攻撃時のダメージ分散
- **AoEダメージ**: 範囲攻撃の複数対象への影響
- **連携コンボ**: チャンピオン間の連携攻撃計算

### 8.3 ゲーム進行要素
- **時間軸シミュレーション**: ゲーム時間による成長計算
- **経験値・ゴールド効率**: レベリング/アイテム購入優先度
- **パワースパイク分析**: 各段階での戦闘力比較
- **後期スケーリング**: 時間経過による強さ変化予測

### 8.4 実戦環境要素
- **地形効果**: 茂み、壁、タワー範囲の影響
- **ミニオンブロック**: ミニオンによるダメージ軽減/増加
- **タワーダメージ**: タワーダイブ時の計算
- **モンスターバフ**: ドラゴン・バロン・リフトヘラルドの効果

### 8.5 統計・分析機能
- **勝率予測**: 計算結果に基づく勝敗予測
- **プロビルド連携**: プロプレイヤーの実際のビルド取得
- **パッチ履歴**: 過去パッチでの同条件比較
- **メタ分析**: 現在のメタに対する効果測定

### 8.6 プリセット・保存機能
- **ビルド保存**: よく使用するビルドの保存
- **シチュエーション保存**: 特定状況の設定保存
- **比較セット**: 複数ビルドの同時比較保存
- **共有機能**: URL経由での設定共有

### 8.7 詳細カスタマイズ
- **カスタムチャンピオン**: 仮想チャンピオンの作成
- **カスタムアイテム**: 仮想アイテムの効果テスト
- **スキル調整**: 数値調整によるバランステスト
- **新パッチ予測**: PBEデータを使った先行検証

## 9. データ更新・メンテナンス

### 9.1 パッチ対応
- 新チャンピオン追加
- スキル調整・リワーク対応
- 新アイテム・ルーン追加

### 9.2 データ検証
- 実ゲームでの検証
- コミュニティフィードバック反映

## 10. 開発優先度

### 10.1 Phase 1（必須機能）- MVP
- ✅ 基本ダメージ計算（物理・魔法・確定）
- ✅ チャンピオン・アイテム・ルーン設定
- ✅ HP操作機能
- ✅ リアルタイム計算
- 🔄 **追加必要**: バフ・デバフシステム基本版
- 🔄 **追加必要**: プリセット保存機能

### 10.2 Phase 2（実用性向上）
- コンボ計算システム
- DPS計算
- 比較機能
- **新規**: 実戦環境要素（タワー・ミニオン）
- **新規**: 統計・分析機能基本版

### 10.3 Phase 3（上級機能）
- チーム戦シミュレーション
- ゲーム進行要素
- プロビルド連携
- **新規**: カスタム要素作成機能

### 10.4 最優先で追加すべき機能

#### A. バフ・デバフシステム（Phase 1）
```javascript
// バフ効果の例
const buffEffects = {
  baron: {
    ad: 40,
    ap: 40,
    recall: true
  },
  redBuff: {
    onHitDamage: 5, // + 0.05 * bonusAD
    slowEffect: 0.15,
    duration: 90
  },
  luluW: {
    attackSpeed: 0.35,
    movementSpeed: 30,
    duration: 5
  }
};
```

#### B. 実戦環境計算（Phase 1）
```javascript
// タワーダメージ計算
function calculateTowerDamage(championLevel, armorReduction) {
  const baseDamage = 152 + (championLevel * 20);
  return baseDamage * (1 - armorReduction);
}

// ミニオンダメージ軽減
function calculateMinionReduction(damageType, minionCount) {
  if (damageType === 'aoe') {
    return Math.max(0.4, 1 - (minionCount * 0.15));
  }
  return 1;
}
```

#### C. 保存・共有機能（Phase 1）
- ビルド設定のURL生成
- ローカルストレージでの設定保存
- エクスポート・インポート機能